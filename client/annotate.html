<template name="annotationPage">
    <div class="container">
        <!-- {{#if isLoggedIn}} -->
            {{>annotateTask}}
        <!-- {{else}} -->
            <!-- {{> annotateLogin}} -->
        <!-- {{/if}} -->
    </div>
</template>

<template name="annotateLogin">
    Please login or create an account before continuing. Use your MTurkID as your username.
</template>

<template name="annotateTask">
    <!-- <h1>Document has been finished by {{numAnnotations}} total people</h1> -->
    <div class="row instructions">
        <!-- <p>Please read the product description below and help us:</p>
        <ol>
            <li>
                Summarize the <span class="key-purpose">problem</span> and <span class="key-mechanism">mechanism(s)</span> of the product in the textboxes below.
            </li>
            <li>
                Annotate the description to mark the individual words that best signal the unique <span class="key-purpose">problem</span> and/or <span class="key-mechanism">mechanism(s)</span> of the product. Mark a word by clicking on it and selecting the appropriate keyword type (e.g., problem or mechanism). You may mark as many words as you think will help.
            </li>
        </ol>
        <p>Click on the "I'm finished" button below when you are done.</p> -->
        <p>Highlight the <span class="key-background">background/implications</span>, <span class="key-purpose">purpose</span>, <span class="key-mechanism">solution mechanism</span> and/or <span class="key-method">research methods</span>, and <span class="key-finding">finding</span> aspects of the abstract below. Select a highlight button to activate a highlight state. Then select parts of the text to apply the highlight state.</p>

        <button class="btn btn-primary" data-target="#tips" data-toggle="collapse" aria-expanded="false" aria-controls="tips">Show/hide tips/examples</button>
        <div class="collapse row" id="tips">
          <div class="col-md-12 col-xs-12">
            <h3>Tips/examples</h3>
            <p>Here are the main parts of the abstract we'd like you to highlight:</p>
            <ol>
              <li><span class="key-background">Background/implications:</span> What motivates the problem/question being addressed in this paper? What is the current state of the world for the problem/question? Why is this problem/question important (for society/other scientists)?</li>
              <li><span class="key-purpose">Purpose:</span> What is the specific/immediate thing the paper's authors want to create or know?</li>
              <li><span class="key-mechanism">Mechanism:</span> If purpose is to create a 'system/method/model': What is the proposed system/method/model, and how does it work?</li>
           <!--    <li><span class="key-method">Research Method(s):</span> If purpose is to produce 'empirical' findings: What research methods were used to answer the research question? If purpose is 'system/method/model': How did the authors evaluate their solution?</li> -->
              <li><span class="key-finding">Findings:</span> If purpose is to produce 'empirical' findings: What did the authors find out? If purpose is 'system/method/model': Did the solution work?</li>
            </ol>

            <p>Here are examples of each highlight type in the context of two different abstracts:</p>
                            <div class="row tutorial-example">
                            <div class="col-md-5 col-xs-5 doc example">
                                <p><label class="trial-names">Example 1</label></p>
                                <span class="key-background">Expert feedback is valuable but hard to obtain</span> for many designers . Online crowds can provide fast and affordable feedback, <span class="key-purpose">but workers may lack relevant domain knowledge and experience</span> . Can expert rubrics address this issue and help novices provide expert-level feedback ?<span class="key-mechanism"> To evaluate this, we conducted an experiment </span>with a 2x2 factorial design . Student designers received feedback on a visual design from both experts and novices, who produced feedback using either an expert rubric or no rubric. We found that rubrics helped novice workers provide feedback that was rated nearly as valuable as expert feedback . <span class="key-mechanism"> A follow-up analysis on writing style</span> showed that student designers found feedback most helpful when it was emotionally positive and specific, and that a rubric increased the occurrence of these characteristics in feedback . <span class="key-finding">The analysis also found</span> that expertise correlated with longer critiques, but not the other favorable characteristics . <span class="key-mechanism">An informal evaluation</span> indicates that experts may instead have produced value by providing clearer justifications .
                            </div>
                            <div class="col-md-5 col-xs-5 doc example">
                                <p><label class="trial-names">Example 2</label></p>
                                <span class="key-background">Eye tracking is a compelling tool</span> for revealing people 's spatial-temporal distribution of visual attention . <span class="key-purpose">But quality eye tracking hardware is expensive</span> and can only be used with one person at a time . <span class="key-purpose">Further, webcam eye tracking systems have significant limitations</span> on head movement and lighting conditions that result in significant data loss and inaccuracies . To address these drawbacks, <span class="key-mechanism">we introduce a new approach</span> that harnesses the crowd to understand allocation of visual attention . <span class="key-mechanism">In our approach</span>, crowdsourcing participants use mouse clicks to self-report the positions and trajectory for the following valuable eye tracking measures: first gaze, last gaze and all gazes . We validate our crowdsourcing approach with a user study, which <span class="key-finding">demonstrated good accuracy</span> when compared to a real eye tracker . We then deployed our prototype, GazeCrowd, in a crowdsourcing setting, and showed that <span class="key-finding">it accurately generated</span> gaze heatmaps and trajectory maps . Such an approach will allow designers to evaluate and refine their visual design without requiring the use of limited/expensive eye trackers .
                            </div>
                        </div>
						<p>As you can see, you don't have to understand exactly what the authors are saying; you can often tell just based on writing/word-level cues when authors are saying a particular kind of thing:</p>
						<ul>
							<li><strong>Example 1</strong> demonstrates one common pattern:
								<ol>
									<li>state the <span class="key-background">background</span> for the paper in the beginning, quickly move to</li>
									<li>describe the specific <span class="key-purpose">purpose</span> of the paper, then go on to</li>
									<li>discuss the <span class="key-method">research methods</span> and <span class="key-finding">findings</span> of the work, and </li>
									<li>zoom back up to <span class="key-background">how their work is important for questions/goals XYZ</span>)</li>
								</ol>
							</li>
							<li><strong>Example 2</strong> illustrates another possible pattern:
								<ol>
									<li>immediately state the specific <span class="key-purpose">purpose</span> of the paper and <span class="key-mechanism">the approach introduced by the paper that achieves that purpose</span>, followed by </li>
									<li><span class="key-background">a statement of how others could benefit from this work</span>, and then </li>
									<li>describing the <span class="key-method">methods</span> and <span class="key-finding">results</span> of their evaluation of their solution</li>
								</ol>
							</li>
						</ul>
          </div>
        </div>
        <hr/>
        <!-- <label>Step 1: Identify and classify the purpose of the paper</label><br/>
        <p>What "kind" of paper is this? I.e., what kind of purpose does the paper have? Examples of system/method/model and empirical papers in <a href="https://goo.gl/kvYJ2P" target="_blank">this doc</a>.</p>
        <textarea class="form-control" id="summ-purp-type" rows="1" placeholder="Write one of the following: system/method/model, empirical, hybrid (system/method/model + empirical), review paper, or other (feel free to specify)"></textarea><br/>
        <p><i>NOTE: if the specific purpose of the paper is NOT either to create a system/method/model OR produce new empirical findings something (e.g., a review paper, a workshop/panel description), please feel free to go ahead and press "I'm finished" without adding highlights.</i></p>
        <label>Step 2: Highlight the abstract</label> -->
        <p>More details on scheme/style guide in <a href="https://goo.gl/kvYJ2P" target="_blank">this doc</a>.</p>
        <br/>
        <div class="btn-group" role="group" aria-label="...">
          <button type="button" class="btn btn-default background init-highlight" data-toggle="tooltip" title="{{labelBackground}}">Highlight{{statusBackground}} background/implications</button>
          <button type="button" class="btn btn-default purpose init-highlight" data-toggle="tooltip" title="{{labelPurpose}}" >Highlight{{statusPurpose}} purpose</button>
          <button type="button" class="btn btn-default mechanism init-highlight" data-toggle="tooltip" title="{{labelMechanism}}">Highlight{{statusMechanism}} mechanism</button>
<!--           <button type="button" class="btn btn-default method init-highlight" data-toggle="tooltip" title="{{labelMethod}}">Highlight{{statusMethod}} research method</button> -->
          <button type="button" class="btn btn-default finding init-highlight" data-toggle="tooltip" title="{{labelFindings}}">Highlight{{statusFinding}} finding</button>
          <button type="button" class="btn btn-default unmark init-highlight">Unhighlight{{statusUnmark}}</button>
          <button type="button" class="btn btn-default none init-highlight">Stop highlighting</button>
        </div>
        <p><span class="highlight-description" style="display:none;">{{highlightDescription}}</span></p>
    <!-- <div class="divider">
      <div class="btn-group" role="group" aria-label="...">
        <button type="button" class="btn btn-default background init-highlight">Highlight background</button>
        <button type="button" class="btn btn-default purpose init-highlight">Highlight purpose</button>
        <button type="button" class="btn btn-default mechanism init-highlight">Highlight mechanism</button>
        <button type="button" class="btn btn-default finding init-highlight">Highlight finding</button>
        <button type="button" class="btn btn-default unmark init-highlight">Remove highlights</button>
        <button type="button" class="btn btn-default none init-highlight">Stop highlighting</button>
      </div>
    </div> -->
    </div>
    <div class="row doc-data">
        <div class="col-md-6 col-xs-6 doc">
            {{#each sentences}}
                {{> sentence}}
            {{/each}}
        </div>
        <div class="col-md-6 col-xs-6 summary">
            <div class="controls">
                <label>General thoughts (optional)</label>
                <textarea class="form-control" id="summ-notes" rows="3" placeholder="Use this space to write any thoughts you have on the document while highlighting (e.g., is there anything weird about the abstract?)"></textarea>
                <!-- <label>Highlight buttons:</label>
                <br/>
                <button type="button" class="btn btn-default background init-highlight">Highlight{{statusBackground}} background/implications</button>
                {{> HighlightDescrBackground}}
                <button type="button" class="btn btn-default purpose init-highlight">Highlight{{statusPurpose}} purpose</button>
                {{> HighlightDescrPurpose}}
                <button type="button" class="btn btn-default mechanism init-highlight">Highlight{{statusMechanism}} mechanism</button>
                {{> HighlightDescrMechanism}}
                <button type="button" class="btn btn-default finding init-highlight">Highlight{{statusFinding}} finding</button>
                {{> HighlightDescrFinding}}
                <button type="button" class="btn btn-default unmark init-highlight">Unhighlight{{statusUnmark}}</button><br/> -->

                  <!-- <button type="button" class="btn btn-default none init-highlight">Stop highlighting</button> -->
                <!-- take the user to confirmation page -->
                <!-- <button class="finished btn btn-success">I'm finished!</button> -->
                <br/>
                <button type="button" class="finished btn btn-success btn-lg " id="load" data-loading-text="<i class='fa fa-circle-o-notch fa-spin'></i> Processing Submission">I'm finished!</button>
                <!-- take the user to confirmation page -->
                <!-- <button class="another btn btn-default">Get me another!</button> -->
            </div>
        </div>
    </div>
</template>

<template name="sentence">
    <p>
        {{#each words}}
            {{> word}}
        {{/each}}
    </p>
</template>

<template name="word">
    <!-- Single button -->
    <!-- <div class="btn-group token-container"> -->
    <span class="token {{keyType}}" id="word-{{_id}}">
      {{content}}
    </span>
</template>
